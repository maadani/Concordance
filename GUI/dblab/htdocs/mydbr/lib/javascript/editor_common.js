function editor_tab_init(){return{text:"",pos:{left:0,top:0},selections:editor.listSelections()}}function editor_tab_close(a){var b;if(typeof a=="undefined"){a=$("#tab_browsing_list li.selected")}b=a.attr("data-id");if(b==$("#tab_browsing_list li.selected").attr("data-id")){editor_tab_select(a.prev())}a.remove();delete buffers[b];if($("#tab_browsing_list li").length==0){editor.setValue("");$("#editor").css("display","none")}return false}function editor_tab_select(d){var e,c,a=$("#tab_browsing_list li.selected"),b=a.attr("data-id");e=d.attr("data-id");if(b!=e&&buffers[e]){if(typeof b!=="undefined"){c=editor.getScrollInfo();buffers[b].text=editor.getValue();buffers[b].pos.left=c.left;buffers[b].pos.top=c.top;buffers[b].selections=editor.listSelections()}editor.setValue(buffers[e].text);editor.scrollTo(buffers[e].pos.left,buffers[e].pos.top);if(buffers[e].selections!==null){editor.setSelections(buffers[e].selections)}d.addClass("selected");a.removeClass("selected");editor.focus()}}function editor_tab_set_text(b,a){buffers[b].text=a;buffers[b].pos.left=0;buffers[b].pos.top=0;buffers[b].selections=null}function editor_tab_get_text(b){var a=$("#tab_browsing_list li.selected").attr("data-id");if(parseInt(a,10)==b){return editor.getValue()}else{return buffers[b].text}}function editor_tab_new(e,d,a){var g=1,b,f=$("#tab_browsing_list"),c="";if(typeof e==="undefined"){e=""}if(typeof d==="undefined"){d=""}if(typeof a==="undefined"){a=""}else{c=a;a=' data-filename="'+a+'"'}f.children().each(function(){if($(this).attr("data-id")){b=parseInt($(this).attr("data-id"),10);if(b>g){g=b}}});if(f.children().length==0){g=1}else{g++}if(e==""){e=mydbr_loc.MYDBR_SQLEDIT_QUERY+" "+(g-1)}f.append('<li title="'+c+'" id="tab_file_query'+g+'" data-id="'+g+'"'+a+'><div class="tab"><span>'+e+'<div class="close hidden"></div></span></div></li>');buffers[g]=editor_tab_init();editor_tab_select(f.children().last());editor.setValue(d)};