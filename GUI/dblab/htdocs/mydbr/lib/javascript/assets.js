(function(b){b.fn.parentRelative=function(){var a,e={},f;e.left=0;e.top=0;f=b(this);while(f.offsetParent()[0].tagName!=="BODY"&&f.offsetParent()[0].tagName!=="HTML"){a=f.offsetParent().position();e.left+=a.left;e.top+=a.top;f=f.offsetParent()}return e}}(jQuery));function makeEvent(f,h,i,j){function g(){return h(i)}if(f.addEventListener){f.addEventListener(j,g,false)}else{if(f.attachEvent){f.attachEvent("on"+j,g)}}}function appbar(b){if(b==0){window.location="logout.php"}else{if(b==1){document.forms.menubarform.app.value="passwd"}else{document.forms.menubarform.app.value="admin0"}document.forms.menubarform.submit()}}String.prototype.unescapeHtml=function(){var c,d;c=document.createElement("div");c.innerHTML=this;d=c.childNodes[0].nodeValue;c.removeChild(c.firstChild);return d};function getTableCell(d,f){var e=d.parentNode.parentNode.cells[f].innerHTML;if(e.length==0){return""}return e.unescapeHtml()}function datepicker(b){$(b).datepicker({showButtonPanel:true,altFormat:"yy-mm-dd"})}function search_table(n,p){var l=n.value.toLowerCase().split(" "),i,o,r,m,k,q;if(i===null){i=$(n).closest("table")}else{i=document.getElementById(p)}q=$(i).width();for(r=1;r<i.rows.length;r++){if(i.rows[r].cells[0].nodeName.toLowerCase()!="th"){o=$(i.rows[r]).find("td").clone().children(".drillmenuitems").remove().end().text();k="none";for(m=0;m<l.length;m++){if(o.toLowerCase().indexOf(l[m])>=0){k=""}else{k="none";break}}i.rows[r].style.display=k}}$(i).width(q);mydbr_table_changed($(i).attr("id"))}function htmlspecialchars_decode(g,i){var k=0,l=0,j=false,h;if(typeof i==="undefined"){i=2}g=g.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");h={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(i===0){j=true}if(typeof i!=="number"){i=[].concat(i);for(l=0;l<i.length;l++){if(h[i[l]]===0){j=true}else{if(h[i[l]]){k=k|h[i[l]]}}}i=k}if(i&h.ENT_HTML_QUOTE_SINGLE){g=g.replace(/&#0*39;/g,"'")}if(!j){g=g.replace(/&quot;/g,'"')}g=g.replace(/&amp;/g,"&");return g}function sprintf(){var m,l,r,q,a,o,p,n,i;m=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g;l=arguments;n=0;i=l[n++];r=function(f,d,e,b){if(!e){e=" "}var c=(f.length>=d)?"":Array(1+d-f.length>>>0).join(e);return b?f+c:c+f};q=function(b,d,f,c,e,g){var h=c-b.length;if(h>0){if(f||!e){b=r(b,c,g,f)}else{b=b.slice(0,d.length)+r("",h,"0",true)+b.slice(d.length)}}return b};a=function(g,h,j,f,e,d,b){var c=g>>>0;j=j&&c&&{"2":"0b","8":"0","16":"0x"}[h]||"";g=j+r(c.toString(h),d||0,"0",false);return q(g,j,f,e,b)};o=function(b,f,e,d,c,g){if(d!=null){b=b.slice(0,d)}return q(b,"",f,e,c,g)};p=function(b,I,H,k,C,e,J){var f,L,g,K,F,h,j=false,G="",D=false,c=false,d=" ",E;if(b=="%%"){return"%"}E=H.length;for(f=0;H&&f<E;f++){switch(H.charAt(f)){case" ":G=" ";break;case"+":G="+";break;case"-":j=true;break;case"'":d=H.charAt(f+1);break;case"0":D=true;break;case"#":c=true;break}}if(!k){k=0}else{if(k=="*"){k=+l[n++]}else{if(k.charAt(0)=="*"){k=+l[k.slice(1,-1)]}else{k=+k}}}if(k<0){k=-k;j=true}if(!isFinite(k)){throw new Error("sprintf: (minimum-)width must be finite")}if(!e){e="fFeE".indexOf(J)>-1?6:(J=="d")?0:undefined}else{if(e=="*"){e=+l[n++]}else{if(e.charAt(0)=="*"){e=+l[e.slice(1,-1)]}else{e=+e}}}h=I?l[I.slice(0,-1)]:l[n++];switch(J){case"s":return o(String(h),j,k,e,D,d);case"c":return o(String.fromCharCode(+h),j,k,e,D);case"b":return a(h,2,c,j,k,e,D);case"o":return a(h,8,c,j,k,e,D);case"x":return a(h,16,c,j,k,e,D);case"X":return a(h,16,c,j,k,e,D).toUpperCase();case"u":return a(h,10,c,j,k,e,D);case"i":case"d":L=parseInt(+h,10);g=L<0?"-":G;h=g+r(String(Math.abs(L)),e,"0",false);return q(h,g,j,k,D);case"e":case"E":case"f":case"F":case"g":case"G":L=+h;g=L<0?"-":G;K=["toExponential","toFixed","toPrecision"]["efg".indexOf(J.toLowerCase())];F=["toString","toUpperCase"]["eEfFgG".indexOf(J)%2];h=g+Math.abs(L)[K](e);return q(h,g,j,k,D)[F]();default:return b}};return i.replace(m,p)}function number_format(o,r,m,p){o=(o+"").replace(",","").replace(" ","");var s=!isFinite(+o)?0:+o,t=!isFinite(+r)?0:Math.abs(r),k=(typeof p==="undefined")?",":p,q=(typeof m==="undefined")?".":m,l="",n=function(c,a){var b=Math.pow(10,a);return""+Math.round(c*b)/b};l=(t?n(s,t):""+Math.round(s)).split(".");if(l[0].length>3){l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,k)}if((l[1]||"").length<t){l[1]=l[1]||"";l[1]+=new Array(t-l[1].length+1).join("0")}return l.join(q)}function parse_num_attr(href){var src=href.substr(href.indexOf("?")+1),attr,attrs=src.split("&"),str="{",i;for(i=0;i<attrs.length;i++){attr=attrs[i].split("=");if(i>0){str+=","}str+=attr[0]+":"+attr[1]}str+="}";return eval("("+str+")")}function is_touch_device(){return(typeof Touch==="object")}function init_scale_image(f){var d,e;d=(f)?f:"";$(d+" div.scale_image").each(function(a){var b,c;if($(this).css("position")!="absolute"){$(this).css("left",$(this).position().left+"px");$(this).css("position","absolute");$(this).css("top",($(this).position().top-25)+"px");b=$($(this).next()[0].useMap).first().children();for(c=0;c<b.length;c++){$.data(b[c],"coords",b[c].coords)}}$(this).slider({value:100,min:10,max:100,slide:function(r,q){var o,s=$(this).next()[0],n,p,t=q.value/100;if(s.style.height!="auto"){$.data(this,"width",$(s).width());$.data(this,"left",$(s).position().left)}o=$.data(this,"width");n=0;p=1;t=n+(t*(p-n));s.style.width=(t*o)+"px";s.style.height="auto";$(s).position().left=$.data(this,"left")},change:function(p,v){var u,i,t,r,q,s=$($(this).next()[0].useMap).first().children();for(r=0;r<s.length;r++){i="";t=$.data(s[r],"coords").split(" ");for(q=0;q<t.length;q++){e=t[q].split(",");for(u=0;u<e.length;u++){e[u]=Math.round(e[u]*v.value/100);i+=e[u];if(u+1!=e.length){i+=","}}if(q+1!=t.length){i+=" "}}s[r].coords=i}}})})}$.fn.serializeObject=function(){var d={},a=this.serializeArray();$.each(a,function(){if(d[this.name]){if(!d[this.name].push){d[this.name]=[d[this.name]]}d[this.name].push(this.value||"")}else{d[this.name]=this.value||""}});return d};function getUrlVars(){var e,g=[],h,f=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(e=0;e<f.length;e++){h=f[e].split("=");g.push(h[0]);g[h[0]]=h[1]}return g}function getURLParameter(b){return decodeURI((RegExp(b+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}function getUrlPath(){var b=window.location;return b.protocol+"//"+b.host+b.pathname}function array_identical(b,f){var a=b.length;if(a!=f.length){return false}while(a--){if(b[a]!==f[a]){return false}}return true}(function(d){var a=d(window);d.fn.viewportOffset=function(){var b=d(this).offset();return{left:b.left-a.scrollLeft(),top:b.top-a.scrollTop()}}})(jQuery);function resize_codemirror(f,d){var e;if(typeof d==="undefined"){d=120}if(!editor.space_below){editor.space_below=d}e=$(window).height()-$(".CodeMirror").offset().top-editor.space_below;editor.setSize("100%",e+"px")}function unicodeToChar(b){return b.replace(/\\u[\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef][\dABCDEFabcdef]/g,function(a){return String.fromCharCode(parseInt(a.replace(/\\u/g,""),16))})}jQuery.uaMatch=function(c){c=c.toLowerCase();var d=(/(chrome)[ \/]([\w.]+)/.exec(c))||(/(webkit)[ \/]([\w.]+)/.exec(c))||(/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c))||(/(msie) ([\w.]+)/.exec(c))||c.indexOf("compatible")<0&&(/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c))||[];return{browser:d[1]||"",version:d[2]||"0"}};if(!jQuery.browser){matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}jQuery.browser=browser}function Countdown(j){var r,l=this,o=j.seconds||10,m=j.onUpdateStatus||function(){},n=j.onCounterEnd||function(){},k=j.display_obj||"refresh_counter",q="go";function p(){if(q=="go"){o--;m(o);if(o<=0){l.stop();n()}}}this.start=function(){clearInterval(r);r=0;r=setInterval(p,1000)};this.stop=function(){clearInterval(r)};this.toggle=function(){$("."+k).toggleClass("paused");if(q=="go"){q="pause"}else{o=parseInt($("."+k).text(),10);q="go"}}}function isIE(){return(navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0)}function csrf_token_get(){return $("#csrf_token").val()}function mydbr_table_changed(b){if($("#"+b).hasClass("lockcolumns")){$("#"+b).lockcolumns()}}function gup(f,h){var g,i,j;h=h.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");g="[\\?&]"+h+"=([^&#]*)";i=new RegExp(g);j=i.exec(f);if(j==null){return""}else{return j[1]}}jQuery.extend({getQueryParameters:function(b){return(b||document.location.search).replace(/(^\?)/,"").split("&").map(function(a){return a=a.split("="),this[a[0]]=a[1],this}.bind({}))[0]}});$(document).ready(function(){$(document).on("click",".param_input .checkboxitem",function(){set_param_cb_value(this)});$(document).on("click",".param_input .optgroupcb",function(){select_opt_group(this)});$(document).on("change",".param_daterange",function(){user_date_range(this)});init_report_params("")});function is_IE8(){return $.browser.msie&&+$.browser.version===8}function user_date_range(q){var p,l,k,o=$(q).prevAll("input"),j=mydbr_sorting.dateformat.replace("d","DD").replace("m","MM").replace("Y","YYYY").substr(0,10),m=mydbr_sorting.dateformat.replace("d","DD").replace("m","MM").replace("Y","YYYY").replace("i","mm").replace("s","ss"),r,n;if(q.value=="none"){return}if(o.length>1){k=$(o[1]);l=$(o[0]);r=k.hasClass("datetimepick")?m:j;n=l.hasClass("datetimepick")?m:j}if(o.length==1){k=$(o[0]);r=k.hasClass("datetimepick")?m:j}if($.browser.safari&&is_touch_device()){r=k.hasClass("datetimepick")?"YYYY-MM-DDTHH:mm:ss":"YYYY-MM-DD";if(typeof(l)!=="undefined"){n=l.hasClass("datetimepick")?"YYYY-MM-DDTHH:mm:ss":"YYYY-MM-DD"}}p=JSON.parse(q.value);if(p.from.type=="day"){k.val(moment().add(p.from.value,"day").startOf("day").format(r));if(typeof(l)!=="undefined"){l.val(moment().add(p.to.value,"day").endOf("day").format(n))}}if(p.from.type=="month"||p.from.type=="year"){if(p.to.value==null){k.val(moment().startOf(p.from.type).startOf("day").format(r));if(typeof(l)!=="undefined"){l.val(moment().endOf(p.to.type).format(n))}}else{if(p.from.value<0&&p.to.value<0){k.val(moment().startOf(p.from.type).add(p.from.value,p.from.type).format(r));if(typeof(l)!=="undefined"){l.val(moment().add(p.to.value,p.from.type).endOf(p.from.type).format(n))}}else{k.val(moment().add(p.from.value,p.from.type).startOf("day").add(1,"day").format(r));if(typeof(l)!=="undefined"){l.val(moment().add(p.to.value,p.to.type).endOf("day").format(n))}}}}if(p.from.type=="quarter"){if(p.to.value==null){k.val(moment().startOf("quarter").format(r));if(typeof(l)!=="undefined"){l.val(moment().endOf("quarter").format(n))}}else{k.val(moment().startOf("quarter").add(p.from.value,"quarter").format(r));if(typeof(l)!=="undefined"){l.val(moment().add(p.to.value,"quarter").endOf("quarter").format(n))}}}}function init_report_params(b){$(b+" .init_scb").scrollcheckbox();if(!is_touch_device()&&!is_IE8()){if(!window.Modernizr.inputtypes.date){$(b+" .param_input .datetimefilter").each(function(){var a;if($(this).attr("data-format_am")=="ampm"){a=["am","pm"]}else{a=["AM","PM"]}$(this).datetimeEntry({datetimeFormat:$(this).attr("data-format"),spinnerImage:"",ampmNames:a})})}}set_optgroup_state(b);$(b+" .autosize_animate").autosize({append:"\n"});if((!window.Modernizr.inputtypes.date||!is_touch_device())){$(b+" .datepick").each(function(){if(!is_IE8()){$(this).attr("type","text")}var a={showOtherMonths:true,selectOtherMonths:true,showButtonPanel:true,changeMonth:true,changeYear:true,showOn:"button",buttonImage:"lib/external/jquery/css/images/calendar.png",buttonImageOnly:true,dateFormat:$(this).attr("data-dateformat")};if($(this).attr("data-years")){a.yearRange=$(this).attr("data-years")}$(this).datepicker(a)})}else{$(b+" .datepick").each(function(){$(this).val($(this).attr("data-stddatetime"))})}if(!window.Modernizr.inputtypes["datetime-local"]||!is_touch_device()){$(b+" .datetimepick").each(function(){if(!is_IE8()){$(this).attr("type","text")}var a={showOtherMonths:true,selectOtherMonths:true,showButtonPanel:true,changeMonth:true,changeYear:true,showOn:"button",buttonImage:"lib/external/jquery/css/images/calendar.png",buttonImageOnly:true,dateFormat:$(this).attr("data-dateformat"),timeFormat:$(this).attr("data-timeformat"),showHour:true,showMinute:true,showSecond:true,addSliderAccess:true,sliderAccessArgs:{touchonly:false}};if($(this).attr("data-years")){a.yearRange=$(this).attr("data-years")}$(this).datetimepicker(a)})}else{$(b+" .datetimepick").each(function(){$(this).val($(this).attr("data-stddatetime"))})}if(!window.Modernizr.inputtypes.time||!is_touch_device()){$(b+" .timepick").each(function(){if(!is_IE8()){$(this).attr("type","text")}$(this).timepicker({buttonImage:"lib/external/jquery/css/images/calendar.png",timeFormat:$(this).attr("data-timeformat"),addSliderAccess:true,sliderAccessArgs:{touchonly:false}})})}else{$(b+" .timepick").each(function(){$(this).val($(this).attr("data-stddatetime"))})}$(b+" .select2").each(function(){var d,a=$(this).outerWidth()+10+"px";if(parseInt(a,10)<20){d={dropdownAutoWidth:true}}else{d={width:a}}$(this).select2(d)});if($(b+" .report_autoexecute").length>0){$(".runreport").click()}$(b+" .ac_input").on("focusout",function(){if($(this).val()==""){var d,a=$(this).closest(".param_row").nextAll(".param_row");for(d=0;d<a.length;d++){if(!$(a[d]).hasClass("ac_id")){break}$(a[d]).find("input").val("")}}})}function select_opt_group(i){var j=$(i).parents(".optgroup"),g=j.find(".checkboxitem:visible").length,e=j.find(".checkboxitem:checked:visible").length,h;h=g>e&&$(i).is(":checked")?true:false;j.find(".checkboxitem:visible").prop("checked",h);set_param_cb_value(j.find(".checkboxitem")[0]);j.parents(".checkboxlist").find(".optgroupclick").click();j.find(".checkboxitem").first().trigger("change")}function set_optgroup_state(g,h){if(typeof(h)=="undefined"){$(g+" .param_input").find(".optgroup").each(function(){set_optgroup_state(g,$(this))})}if($(h).hasClass("checkboxlist")){h.find(".optgroup").each(function(){set_optgroup_state("",$(this))})}if($(h).hasClass("optgroup")){var f=h.find(".checkboxitem").filter(function(){return $(this).parent().css("display")!=="none"}).length,e=h.find(".checkboxitem:checked").filter(function(){return $(this).parent().css("display")!=="none"}).length;h.find(".optgroupcb").prop("indeterminate",false);if(f==e&&f!=0){h.find(".optgroupcb").prop("checked",true)}else{if(e==0){h.find(".optgroupcb").prop("checked",false)}else{h.find(".optgroupcb").prop("checked",false);h.find(".optgroupcb").prop("indeterminate",true)}}}}function set_param_cb_value(d){var f="",e="";$(d).parents(".checkboxlist").find(".checkboxitem:checked").each(function(){f+=e+$(this).val();e=","});$(d).parents(".checkboxlist").find(".cbinput").val(f);set_optgroup_state("",$(d).parents(".optgroup"))}function set_param_autocomplete(f,d,e){$("#"+f).autocomplete("apps/paramautoc.php",{extraParams:{sql:d,id:f},highlight:false,matchContains:true,max:e,scrollHeight:360,cacheLength:0,formatItem:function(a){return a[0]+(a[1]==undefined?"":a[1])},selectedRow:function(a){var c,h,b;for(h=2;h<a.length;h++){b=f.match(/\d+$/);c=f.substring(0,f.length-b.toString().length)+(parseInt(b,10)+h-1);$("#"+c).val(htmlspecialchars_decode(a[h]))}},formatResult:function(a){return htmlspecialchars_decode(a[0])}})}function input_change_handler(b){if(b.attr("data-last_value")==undefined){b.attr("data-last_value",b.val())}else{if(b.attr("data-last_value")!=b.val()){b.attr("data-last_value",b.val());b.trigger("change")}}}function init_connected_param(elem,param,affected,datatypes,params){var $te,input,data,cv,tobechanged;if(elem){elem="#"+elem+" "}if(1==0){$te=$(elem+'input[name="u'+param+'"]');if($te.closest(".checkboxlist").length>0){setInterval(function(){input_change_handler($te)},100)}}$(document).on("change",elem+"input.checkboxitem, "+elem+'input[name="u'+param+'"], '+elem+'select[name="u'+param+'"]',function(e){var i,tc,id_check;if($(this).hasClass("checkboxitem")){id_check=elem+"u"+param;if(this.id.substr(0,id_check.length)!=id_check){return}set_param_cb_value(this)}else{cv=$(this).attr("data-cv");if($(this).attr("type")!="radio"&&typeof cv!=="undefined"&&cv!==false){if(cv==$(this).val()){return}}}tobechanged=[];for(i=0;i<affected.length;i+=2){data=$(elem+"form").first().serializeObject();data.p_elem=elem;data.p_id=affected[i];data.p_query=affected[i+1];data.p_datatypes=datatypes;data.p_params=params;data.p_options="{}";input=$(elem+'[name="u'+data.p_id+'"]').first();if(input.first().is("select")||input.parent().hasClass("popuplist")){data.p_format="popup";if(input.hasClass("select2")){data.p_options='{"find":1}'}}else{if(input.parents().hasClass("checkboxlist")||input.first().next().find("input").attr("type")=="checkbox"){data.p_format="checkbox"}else{if(input.parent().hasClass("inline_param")){data.p_options='{"side_by_side":1}'}data.p_format="radio"}}tobechanged.push(elem+'[name="u'+affected[i]+'"]');$.ajax({url:"lib/connected_param.php",type:"get",data:data,async:false,success:function(data){eval(data)}})}$(this).attr("data-cv",$(this).val());for(tc=0;tc<tobechanged.length;tc++){$(tobechanged[tc]).first().change()}})}var hover_menu=null,mydbr_selected_cell=null,refreshCounter=null;$(document).ready(function(){if(is_touch_device()){$(".mydbr_popupframe").each(function(b){$(this).css("position","absolute")})}$(".mydbr_popupframe").each(function(b){$(this).draggable({handle:"th.border",stop:function(){popup_check_position("",$(this))}})});$(document).on("click",".search_arrow",function(){Tools(this)});$(document).on("click",".refresh_counter",function(){if(refreshCounter!==undefined&&!$(this).hasClass("no_toggle")){refreshCounter.toggle()}});$(document).on("click",".mydbr_popupframe th.border a, .dialog_close",function(){popupclose(this)});$(document).on("keyup",".mydbr_popupframe",function(b){if(b.keyCode&&b.keyCode===$.ui.keyCode.ESCAPE){popupclose($(this).find("th.border a"))}});$(document).on("touchend",".mydbr_popupframe",function(){move_popup_to_top($(this))});$(document).on("click",".mydbr_popupframe",function(){move_popup_to_top($(this))});$(document).on("click",".popupmenu .popuprow",function(){changeObjectVisibility(window.currentlyVisiblePopup,"none");window.currentlyVisiblePopup=false});$(document).on("click","area.new_window,a.new_window",function(){window.open(this.href);return false});$(document).on("change","td.autosubmit .jeditableform select",function(){$(this).closest("form").submit()});init_report_elements("");if($("#ajaxBusy").length==0){$("body").append('<div id="ajaxBusy"><p><img src="interface/images/loader.gif"></p></div>')}$(document).ajaxStart(function(){$("#ajaxBusy").show()}).ajaxStop(function(){$("#ajaxBusy").hide()});$("#param_input_toggle").click(function(){$(".param_input").first().slideToggle()});$("importform").submit(function(){import_start(this)});$(document).on("click",".inline_close",function(b){$(this).closest("tr.inline_report").remove()});$(document).on("click",".inline_newwin",function(b){window.open($(this).attr("data-url"));$(this).closest("tr.inline_report").remove()})});function refresh_counter_init(b){refreshCounter=new Countdown({seconds:b,onCounterEnd:function(){location.reload()},onUpdateStatus:function(a){$(".refresh_counter").text(a)}});refreshCounter.start()}function ismainw(){return $("div.reports div.group").length?1:0}function fav_handle(reportid,url,favid,ismain){var curr_url="report.php"+location.search;if(ismain!==undefined&&ismain){curr_url=""}$.ajax({url:"apps_v/favourite_v.php",type:"post",data:{favid:favid,reportid:reportid,url:url,curr_url:curr_url},success:function(set){if(set){var fav_reports,ret=eval("("+set+")");$("#favmenu").html(ret.menu);hovermenu_init("",ismainw());fav_reports=new Array();$(".is_fav").each(function(s){if(jQuery.inArray(parseInt($(this).attr("id").substr(1),10),fav_reports)<0){$(this).toggleClass("no_fav");$(this).toggleClass("is_fav")}})}}})}function dynamic_pdf_export_url(e){var f,d;if($(".mydbr_tabs").length){f=$(e).find("li.pdf a").attr("href");d=$.getQueryParameters(f);$(".mydbr_tabs").each(function(b){var a=$(this).attr("id");d["t_"+a]=$("#"+a).tabs("option","active")});f=decodeURIComponent($.param(d,true));$(e).find("li.pdf a").attr("href",f)}}function hovermenu_init(c,d){$(c+" .hovermenu_icon > li").hover(function(){if(hover_menu){hover_menu.find("ul").fadeOut("fast");hover_menu.find(".menutip").css("display","none");hover_menu=null}$(this).find("ul").fadeIn("fast");dynamic_pdf_export_url($(this).find("ul"));$(this).find(".menutip").fadeIn("fast")},function(){hover_menu=$(this);setTimeout("check_hovermenu_hover()",400)});$(".favourites .rmfav").each(function(){$(this).click(function(){var a=parse_num_attr($(this).children(":first-child").attr("href"));fav_handle(a.r,"",a.f,ismainw());return false})});$(".favadd span a").click(function(){fav_handle($(this).parent().attr("id").substring(8),"report.php"+location.search,0);return false})}function check_hovermenu_hover(){if(hover_menu){hover_menu.find("ul").fadeOut("fast");hover_menu.find(".menutip").fadeOut("fast")}}function editable_def_callback(value,settings){var cut=0,is_json=false;if(value.substr(0,9)=="dbr.html:"){cut=9}else{if(value.substr(0,9)=="dbr.json:"){cut=9;is_json=true}else{if(value.substr(0,13)=="dbr.purehtml:"){cut=13}}}if(cut>0){if(is_json){json=jQuery.parseJSON(value.substr(cut));eval(json[0]);$(this).text(json[1])}else{$(this).html(value.substr(cut))}}}function init_report_elements(e){$(e+" .accordion").each(function(){var options,options_str=$(this).attr("data-options"),acc_options={autoHeight:false,collapsible:true,heightStyle:"content"},multi={beforeActivate:function(event,ui){var currHeader,currContent,isPanelSelected;if(ui.newHeader[0]){currHeader=ui.newHeader;currContent=currHeader.next(".ui-accordion-content")}else{currHeader=ui.oldHeader;currContent=currHeader.next(".ui-accordion-content")}isPanelSelected=currHeader.attr("aria-selected")=="true";currHeader.toggleClass("ui-corner-all",isPanelSelected).toggleClass("accordion-header-active ui-state-active ui-corner-top",!isPanelSelected).attr("aria-selected",((!isPanelSelected).toString()));currHeader.children(".ui-icon").toggleClass("ui-icon-triangle-1-e",isPanelSelected).toggleClass("ui-icon-triangle-1-s",!isPanelSelected);currContent.toggleClass("accordion-content-active",!isPanelSelected);if(isPanelSelected){currContent.slideUp()}else{currContent.slideDown()}return false}};if(options_str!==undefined){options=jQuery.parseJSON(options_str);if(options.multiopen===true){jQuery.extend(options,multi)}jQuery.extend(acc_options,options)}$(this).accordion(acc_options)});$(e+" div.pager").mydbr_pager();if((!$.browser.msie)||($.browser.version>=8)){$(e+" .tTip").tipTip({defaultPosition:"top",maxWidth:"auto"})}if($(e+" .search").length>0){if($(e+" .search").css("display")=="none"){$(e+" table").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")})}}if(typeof mydbr_loc=="undefined"){return}$(e+" table th.selectfilter,"+e+" table th.textfilter").closest("table").each(function(){$(this).columnfilter({all:mydbr_loc.MYDBR_AA_ALL,skip_row:["summary_row"]})});$(e+" div.gvchart").hover(function(){$(this).addClass("gvchartactive")},function(){$(this).removeClass("gvchartactive")});$(e+" table.tblr:not(.no_tooltip) td").hover(function(s){tt(this)});$(e+" table.scrollable").each(function(){$(this).scrollabletable({height:$(this).attr("data-scrollheight")})});$(e+" table.sortable").each(function(){var i,sort_values,ts,sort_param=new Array(),w=["zebra"];ts=$(this).attr("data-sort");if(ts!==undefined){sort_values=ts.split(",");for(i=0;i<sort_values.length;i+=2){sort_param.push([sort_values[i],sort_values[i+1]])}}if($(this).hasClass("sort_rmbr")){w.push("saveSort")}$(this).tablesorter({widgets:w,sortList:sort_param})});$(e+" table.sortable th.cell_header,"+e+" table.sortable .cell_ct").each(function(s){if(!$(this).hasClass("unsortable")){this.title=mydbr_loc.MYDBR_AA_MULTILEVEL_SORT}});$(e+" table.lockcolumns").each(function(){$(this).lockcolumns()});if(!$.browser.msie||$.browser.version>=8){$(e+" table.stickyheader").each(function(){if($(this).closest(".mydbr_popupframe").length==0){$(this).stickyTableHeaders()}})}hovermenu_init(e,(location.pathname.slice(-9)=="index.php"));$(e+" .editable").each(function(i,e){var sql,type,url,options,editable_options,hash,inputtype,select,submit_b,cancel_b,no_edit,dataType,format,json_callback;sql=$(this).attr("data-url");no_edit=$(this).hasClass("no_edit");if(no_edit){$(this).removeClass("editable")}if(sql&&!no_edit){json_callback=0;format=$(this).attr("data-format");if(typeof format==typeof undefined||format==false){format=""}hash=$(this).attr("data-urlhash");type=$(this).attr("data-type");select=$(this).attr("data-select");selectquery=$(this).attr("data-selectquery");inputtype=$(this).attr("data-input");options=eval("("+$(this).attr("data-options")+")");dataType=(options.dataType==undefined)?"text":options.dataType;delete options.dataType;if(options.callback==undefined){options.callback=editable_def_callback;json_callback=1}options.callback_user=null;if(options.onblur==undefined){options.onblur="submit"}if((select!==undefined&&select!="")||(selectquery!=undefined&&selectquery!="")){if(select!==undefined&&select!=""){options.data=select}else{options.loadurl="lib/editable.php?"+selectquery}if(options.type==undefined){options.type=((inputtype==undefined)||inputtype=="")?"select":inputtype}options.callback_user=options.callback;options.callback=editable_select;json_callback=0}if(options.onblur!="submit"||options.type=="radiobutton"||options.type=="datetimepicker"||options.type=="datepicker"||options.type=="timepicker"){submit_b='<button type="submit">'+mydbr_loc.MYDBR_AA_OK+"</button>";cancel_b=mydbr_loc.MYDBR_AA_CANCEL;options.onblur=""}if(options.onblur!="submit"&&(options.type=="datepicker")){options.onblur=""}if(options.type==undefined&&$(this).hasClass("align_r")){options.type="textright"}if(!is_touch_device()&&options.type=="select"&&options.onblur=="submit"){$(this).addClass("autosubmit")}editable_options={submitdata:{mydbr_sql:sql,mydbr_type:type,mydbr_hash:hash,mydbr_format:format,mydbr_json_callback:json_callback},ajaxoptions:{dataType:dataType},placeholder:"",cssclass:"jeditableform",cancel:cancel_b,submit:submit_b};jQuery.extend(editable_options,options);url="lib/save.php";$(this).editable(url,editable_options);$(this).removeAttr("data-url");$(this).removeAttr("data-type");$(this).removeAttr("data-options");$(this).removeAttr("data-urlhash");$(this).removeAttr("data-select");$(this).removeAttr("data-query");$(this).removeAttr("data-input");$(this).removeAttr("data-colstyle")}});$(e+" div.dbrlist_menu").click(function(){$(this).children("ul").slideToggle("fast")});$(e+" .dbrlist li").each(function(s){$(this).click(function(){$(this).parent().children().removeClass("selected");$(this).addClass("selected")})});$(e+" .mydbr_tabs").each(function(s){$(this).tabs({fx:{opacity:"toggle",duration:"fast"},active:$(this).attr("data-selected"),load:function(event,ui){init_report_elements("#"+$(ui.panel).attr("id"))}})});$(e+" .gv_source_toggle").each(function(s){$(this).click(function(){gv_toggle_source(this)})});init_scale_image(e);$(e+" .mydbr_tab_wrapper").css("visibility","visible");$(e+" .accordion_wrapper").css("visibility","visible");$(e+" .mydbrselectlist").each(function(){$(this).change(function(){mydbr_selected_cell=this;window.location.href=$(this).val()})})}function export_disable(b){$(document).ready(function(){var f,e,a=b.split(",");for(f=0;f<a.length;f++){$(".hovermenu li."+a[f].toLowerCase()).remove()}e=$(".hovermenu");for(f=0;f<e.length;f++){if($(e[f]).children().length==0){$(e[f]).closest("ul.hovermenu_icon").remove()}}})}function copyIE(b){window.clipboardData.setData("Text",b);alert(mydbr_loc.MYDBR_AA_COPY_TO_CLIPBOARD_OK)}function urldecode(b){return decodeURIComponent(b.replace(/\+/g,"%20"))}function popupclose(f){if($(f).parents().length==0){f=this}$(f).parents(".mydbr_popupframe").hide();$("body").css("height","auto").css("width","auto");var d=null,e=null;$(".mydbr_popupframe:visible").each(function(b){var a=parseInt($(this).css("z-index"),10);if(!d||a>d){d=a;e=this}});if(e){$(e).focus()}}function drill_img(){var f,d,e;d="Link"+arguments[1]+"Menu";popuptable=$("#"+d)[0].children[0];f=0;for(f=2;f<arguments.length;f++){e=popuptable.rows[f-1].cells[0];$(e).html(urldecode(arguments[f]))}return !showPopup(d,arguments[0],true)}function move_popup_to_top(i){if(!i){return}var l,g=false,j=i.position(),h,k=parseInt(i.css("z-index"),10);$(".mydbr_popupframe").each(function(a){if(this!=i.get(0)&&$(this).is(":visible")){k=Math.max(k,parseInt($(this).css("z-index"),10)+1);h=$(this).position();if(h.left==j.left&&h.top==j.top){g=true}}});if(g){i.css("left",(j.left+10)+"px");i.css("top",(j.top+10)+"px")}i.css("z-index",k);l=$(document.activeElement);if(i.has(l).length==0&&i!=l){i.focus()}}function popup_check_position(z,B,E){var s,C,t,D,w,x,A,u,r,q,F,y,v;if(typeof E=="undefined"){E=false}if(z==""){z=B.find(".popup_content")}q=z.css("overflow-y")?z.css("overflow-y"):"visible";F=z.css("overflow-x")?z.css("overflow-x"):"visible";z.css("overflow-y","initial");z.css("overflow-x","initial");z.css("height","auto");z.css("width","auto");if(is_touch_device()){B.css("position","absolute")}s=$(window).height()-80;C=$(window).width()-20;if(z.height()>s&&!is_touch_device()){z.css("height",s);if(q!="scroll"){B.width(B.width()+25)}z.css("overflow-y","scroll")}if(z.width()>C&&!is_touch_device()){A=B.width()-z.width();z.css("overflow-x","scroll");z.css("width",C);B.width(C+A);B.css("left",5)}if(z.height()>s&&is_touch_device()){$("body").css("height",($(window).scrollTop()+z.height()+100)+"px")}t=B.offset().top;if(B.css("position")!="absolute"){t-=$(window).scrollTop()}if(t<0){t=0;B.animate({top:t})}D=t+B.outerHeight();if(D>$(window).height()&&!is_touch_device()){if(E){if(t>$(window).height()){fh=B.find(".border").first().outerHeight()+2;B.animate({top:$(window).height()-fh})}}else{w=D-$(window).height()+10;t=t-w;if(is_touch_device()){t=$(window).scrollTop()+10}if(t<0){t=5}B.animate({top:t})}}D=t+B.outerHeight();x=B.offset().left-$(window).scrollLeft();u=0;if(is_touch_device()){if(B.width()+$(window).scrollLeft()>$(document).width()){u=1}}else{x=B.offset().left;if(B.width()+x>$(document).width()){u=B.width()+x-$(document).width()}}y=0;v=50;if(E){y=B.width()-v}if(x<(-1*y)||u>y){if(is_touch_device()){r=$(window).scrollLeft()+5;if(B.width()+r>$(document).width()){$("body").css("width",(B.width()+10)+"px");r=5}}else{if(u>0){u+=10}if(x<(-1*y)){x=-1*y;B.animate({left:x})}else{B.animate({left:B.offset().left-u+y})}}}if(is_touch_device()){$(B).find(".border > .close").css("margin-left","20px")}move_popup_to_top($(z).parents(".mydbr_popupframe"))}function embed_title(i){var h,f,j,g;h="";f=/(<div class="title">.*?<\/div>)|(<th colspan="2" class="paramTitle">.*?<\/th>)/i;j=i.match(f);if(j&&j.length>0){h=j[0];h=h.replace(/(<([^>]+)>)/gi,"");i=i.replace(f,"");if(i.substring(0,6).toLowerCase()=="<br>"){i=i.substring(6)}}g=new Object;g.title=h;g.data=i;return g}function embed_set_data(q,p,m,r){var n,t,l,o,s,k;n=$("#"+q).closest(".mydbr_popupframe");t=(p.search('class="param_input')>0);l=n.hasClass("mydbr_popupframe")&&(!new RegExp(/^<script.*<\/script>$/).test(p));if((l)||(t)){o=embed_title(p);m=o.title?o.title:m;p=o.data}if(!l&&t){q="popup";n=$("#"+q).closest(".mydbr_popupframe")}$("#"+q).html(p);if((l)||(t)){if(typeof r=="undefined"){r=""}if(l&&r!=""){n.attr("data-refreshurl",r)}n.find("th").first().find("span").html(m);n.fadeIn();popup_check_position($("#"+q),n);if(n.find("form.param_input").length==0||n.find("form.param_input").hasClass("in_report_param")){n.find(".border .newwin").show()}else{n.find(".border .newwin").hide()}n.find("form.param_input").submit(function(){s=$(this).serialize();var a=getUrlPath()+"?"+s.replace("&embedi="+q,"");if(q=="popup_parameter"){window.location.href=a;return false}n.find(".border .newwin").attr("onclick","window.open('"+a+"')");execute_popup_report(s);if(!l){popupclose(this)}return false})}init_report_params("#"+q);if((l)||(t)){popup_check_position($("#"+q),n)}init_report_elements("#"+q);k=p.match(/^<script[^>]*>([\s\S]*?)<\/script>$/ig);if(!$("#"+q).hasClass("no_scroll_to")&&$("#"+q).css("display")!="none"&&p!=""){if(!l&&!k&&!$("#"+q).visible(true)){$.scrollTo($("#"+q),800,{easing:"easeInOutCubic",onAfter:function(){$("#"+q).effect("highlight",500)}})}else{if(!l&&!k){$("#"+q).effect("highlight",500)}}}}function embed_element(w,p,s,r){var D,q,u,C,B,A,x,y,v,z,t;if(typeof s=="undefined"){s=""}if(typeof r!="undefined"&&r!=null&&w!="inline"){mydbr_selected_cell=r}q=false;if(w=="inline"){D=$(r).closest("tr");if(D.length==0){D=$(mydbr_selected_cell).closest("tr")}if(D.length>0){if(D.next().hasClass("inline_report")){D.next().remove();return}w=D.closest("table").attr("id")+"r_"+D.prevAll("tr").not(".inline_report").length;D.after('<tr class="inline_report"><td id="'+w+'" class="inline_report_cell" colspan="'+D.children().length+'"></td></tr>');q=true}}A=false;x="";y="new_popup";v=".content";z="popup";t=w;if(w.slice(-2)=="[]"){A=true;w=w.substr(0,w.length-2)}if(w.indexOf(".")>0){v="#"+w.substr(0,w.indexOf("."));w=w.substr(w.indexOf(".")+1);if(w.indexOf(".")>0){x=w.substr(w.indexOf(".")+1);w=w.substr(0,w.indexOf("."))}}dynamic_popup=((w.slice(0,z.length)==z)&&w!=z)||(t==y);if((A||dynamic_popup)&&!$("#"+w)[0]){B=1;while($("#"+w+B)[0]){B++}if(w==y){w=w+B}if(dynamic_popup){C='<table class="mydbr_popupframe"><tr><th class="border"><a class="close" href="javascript:void(0)"></a><a class="newwin" href="javascript:void(0)"></a><span></span></th></tr><tr><td><div class="popup_content" id="'+w+'"></div></td></tr></table>';$(".content").append($(C));$("#"+w).closest(".mydbr_popupframe").draggable({handle:"th.border",stop:function(){popup_check_position("",$(this),true)}})}else{if(!$(v)[0]){v=v.substr(1);alert("Missing target embed object '"+v+"'.\nCreate the object using command:\nselect 'dbr.embed_object', '"+v+"';");return}else{$(v).append($('<div id="'+w+'" class="'+x+'"></div>'))}}}$("#"+w).closest(".mydbr_popupframe").find(".border .newwin").attr("onclick","window.open('"+p+"');");$("#"+w).closest(".mydbr_popupframe").attr("tabIndex",-1).css("outline","0");if(!$("#"+w)[0]){alert("Missing target embed object '"+w+"'.\nCreate the object using command:\nselect 'dbr.embed_object', '"+w+"';");return}u=p;if(w!=="popup_parameter"){u+="&hdr=0"}$.ajax({url:q?u+"&embed=3":u,type:"get",data:{embedi:w},success:function(a){embed_set_data(w,a,s,(w=="inline"?u+"&embedi=1":u+"&embedi="+w));if(q){$("#"+w).prepend('<div style="position: relative;"><button class="ui-button ui-state-default ui-corner-all ui-button-icon-only inline_newwin" data-url="'+p+'" role="button" aria-disabled="false" style="position: absolute;right: 24px;top:-24px;"><span class="ui-button-icon-primary ui-icon ui-icon-newwin"></span><span class="ui-button-text">close</span></button><button class="ui-button ui-state-default ui-corner-all ui-button-icon-only inline_close" role="button" aria-disabled="false" style="position: absolute;right: 0px;top:-24px;"><span class="ui-button-icon-primary ui-icon ui-icon-close"></span><span class="ui-button-text">close</span></button></div>')}}})}function execute_popup_report(d){var e,f;if(d.substr(0,7)!="http://"&&d.substr(0,8)!="https://"){e=getUrlPath()+"?"+d}else{e=d}f=gup(e,"embedi");if(!f){f="popup"}$.ajax({url:e,type:"get",success:function(a){if(a){embed_set_data(f,a,"",e)}else{$(".mydbr_popupframe").hide();$("#"+f).html("")}}})}function drill_set(h,k){var m,l,j,n,i;mydbr_selected_cell=k;n=$("#"+h)[0].children[0];j=k.lastChild?k.lastChild:k.next();for(l=0;l<j.children.length;l++){m=j.children[l].firstChild.cloneNode(true);if(m.href.indexOf("embed_element")>0){m.href=m.href.replace(/%/g,"%25")}i=n.rows[l+1].cells[0];i.replaceChild(m,i.firstChild)}}function CopyTable(n,h){var l="",j=false,i,k,m=document.getElementById(n);for(i=0;i<m.rows.length;i++){if($(m.rows[i]).parent().hasClass("tableFloatingHeader")){continue}if(i!=0&&l!=""){l=l+"\n";if(j){l=l+"\t";j=false}}for(k=0;k<m.rows[i].cells.length;k++){if(m.rows[i].cells[k].className!="invisible"&&!$(m.rows[i].cells[k]).hasClass("drill")&&m.rows[i].cells[k].className!="dbrResultSetTitle"){if(m.rows[i].cells[k].className=="cell_ct_top"){if(m.rows[i].cells[k].rowSpan==2){j=true}}if(k!=0){l=l+"\t"}if($(m.rows[i].cells[k]).hasClass("summary")){l=l+'"'+$(m.rows[i].cells[k]).text()+'"'}else{l=l+$(m.rows[i].cells[k]).text()}}}}if(h===undefined){return l}else{copyIE(l)}}function HideDL(b){$("#iedl_"+b).slideDown()}function NetwExport(b){$("#iedl_"+b).slideDown();$("#iedl_"+tableID).effect("shake",{distance:5})}function NetwSrc(f){var d=document.getElementById("tool_"+id),e=document.getElementById("tab_"+id);if(e.style.display=="none"){d.src="images/tab_d.gif";e.style.display=""}else{d.src="images/tab_r.gif";e.style.display="none"}}function gv_toggle_source(b){$(b).toggleClass("arrow_right");$(b).toggleClass("arrow_down");$(b).parents(".gvchart").find(".gvsource").toggle()}function Tools(c){var d=$(c).siblings(".search_div");if($(c).hasClass("arrow_right")){$(d).removeClass("search");$(d).css("display","none");$(c).removeClass("arrow_right");$(c).addClass("arrow_down");d.show("slide",{direction:"up",complete:function(){if(!$(c).hasClass("no_focus")){d.find(".findit").focus()}}})}else{$(c).removeClass("arrow_down");$(c).addClass("arrow_right");d.slideUp();$(d).addClass("search")}mydbr_table_changed($(c).closest("table").attr("id"))}function getHdrCell(c,i,h){var j=0,g=0;while(i.cells.length>j&&(c+i.cells[j].colSpan+g)<h+1){g+=i.cells[j].colSpan;j++}if(i.cells.length>j){return $(i.cells[j]).text()}else{return""}}function tt(j){if(j.title!=""||$(j).hasClass("drill")){return}var m=$(j).closest("tr"),n=$(j).closest("table"),k="",h,l,i;i=$(n).find("thead:not(.tableFloatingHeader) tr:not(.selectfilter,.textfilter)");if(i.length==1){return}nbrOfHdr=i[0].cells[0].colSpan;l=i.length;for(h=0;h<nbrOfHdr;h++){k+=$(m[0].cells[h]).text()+" "}k+=" / ";if(l==1){k+=$(n.rows[1].cells[j.cellIndex]).text()}else{k+=$(i[0].cells[1]).text()+" ";if(l==3){k+=getHdrCell(nbrOfHdr,i[1],j.cellIndex);if(l>1){k+=" / "+getHdrCell(1,i[2],j.cellIndex+1)}}else{if(l==2){k+=getHdrCell(1,i[1],j.cellIndex+1)}}}j.title=k}function autosum_int(g,h,f,e){if(typeof g!="object"){g=this}if(typeof h!="number"){h=g.cellIndex+1}if(typeof f!="string"){f=""}if(typeof e!="string"){e=""}ct_total(g,h-1,0,f,e);col_sum(g,h-1,0,f,e)}function autosum_float(h,i,g,f,j){if(typeof h!="object"){h=this}if(typeof i!="number"){i=h.cellIndex+1}if(typeof g!="number"){g=0}if(typeof f!="string"){f=""}if(typeof j!="string"){j=""}ct_total(h,i-1,g,f,j);col_sum(h,i-1,g,f,j)}function ct_total(m,r,o,l,j){var p,k,n,q;n=$(m).attr("data-ct_col");q=$(m).parent().find("."+n);if(q.length==0||n=="undefined"){return}p=q.attr("data-ct_oper");total=p=="sum"?0:null;$(m).parent().find('[data-ct_col="'+n+'"]').each(function(b,a){k=cell_value_get($(this),o,null,l,j);if(total==null||k==null){total=(k==null)?total:k}else{if(p=="sum"){total+=k}else{if(p=="min"){total=(k<total)?k:total}else{if(p=="max"){total=(k>total)?k:total}}}}});cell_value_set(q,total,o,l,j);col_sum(m,q.index(),o,l,j)}function cell_value_get(g,f,e,h){if(typeof f!="number"){f=0}if(typeof e!="string"){e=""}if(typeof h!="string"){h=""}val=$(g).text();val=val.replace(mydbr_sorting.separator.thousand,"");val=val.replace(mydbr_sorting.separator.decimal,".");if(typeof val=="string"){val=val.replace(/[^\d\.-]/g,"")}if(val==""){return null}return val?parseFloat(val):0}function cell_value_set(i,h,g,f,j){if(typeof g!="number"){g=0}if(typeof f!="string"){f=""}if(typeof j!="string"){j=""}$(i).html(f+number_format(h,g,mydbr_sorting.separator.decimal,mydbr_sorting.separator.thousand)+j)}function col_value_text(e,f,g){var h=e.parentNode;if(typeof f!="number"){f=e.cellIndex+1}if(arguments.length>2){$(h.cells[f-1]).html(g)}return $(h.cells[f-1]).html()}function col_value_get(j,g,h,l,k){var i;if(typeof g!="number"){g=j.cellIndex+1}i=$(j).closest("tr").children().eq(g-1);if(i.length==0){return null}return cell_value_get(i,h,l,k)}function col_value_set(l,h,i,j,n,m){var k=$(l).closest("tr").children().eq(h-1);if(k.length==0){return null}cell_value_set(k,j,i,n,m)}function col_sum(s,x,v,q,n){var i,p,w,r=[],o,u,t;tbody=s.parentNode.parentNode;if(typeof x!="number"){x=s.cellIndex}if(typeof v!="number"){v=0}if(typeof q!="string"){q=""}if(typeof n!="string"){n=""}p=0;for(i=0;i<tbody.rows.length;i++){if($(tbody.rows[i]).hasClass("summary_row")){o=$(tbody.rows[i].cells[x]);if(o.hasClass("summary_level0")){u=0}else{if(o.hasClass("summary_level1")){u=1}else{if(o.hasClass("summary_level2")){u=2}else{if(o.hasClass("summary_level3")){u=3}else{if(o.hasClass("summary_level4")){u=4}}}}}for(t=0;t<=u;t++){if(typeof r[t]=="undefined"){r[t]=p}else{r[t]+=p}}o.html(mydbr_sorting.sum_prefix+" "+q+number_format(r[u],v,mydbr_sorting.separator.decimal,mydbr_sorting.separator.thousand)+n);if(u==0){return p[u];break}else{for(t=u;t<r.length;t++){r[t]=0}p=0}}else{if($(tbody.rows[i]).hasClass("no_mydbr_count")||$(tbody.rows[i].cells[x]).hasClass("no_mydbr_count")){continue}w=$(tbody.rows[i].cells[x]).html();w=w.replace(mydbr_sorting.separator.thousand,"");w=w.replace(mydbr_sorting.separator.decimal,".");if(typeof w=="string"){w=w.replace(/[^\d\.-]/g,"")}w=parseFloat(w);if(!isNaN(w)){p+=parseFloat(w)}}}return p}function editable_select(){var select,callback,editable_id,cell,i;switch(arguments[1].type){case"radiobutton":default:if(arguments[1].data!==undefined){select=eval("("+arguments[1].data+")");if(select.length>0&&typeof select[0]==="object"){for(i=0;i<select.length;i++){if(select[i]["i"]==arguments[0]){$(this).html(select[i]["v"]);break}}}else{$(this).html(select[arguments[0]])}}editable_id=arguments[0];cell=this;if(arguments[1].loadurl!==undefined){$.ajax({url:arguments[1].loadurl,async:false,success:function(result){select=eval("("+result+")");$(cell).html(select[editable_id])}})}}if(arguments[1].callback_user){callback=arguments[1].callback_user;callback.apply(this,[arguments[0],arguments[1]])}}function import_start(b){if($("#ul_form_"+b+' label [name="mydbrimport"]')[0].value==""){alert(mydbr_loc.MYDBR_IMPORT_SELECT);return false}else{$("#ul_form_"+b).hide();$("#ul_process_"+b).show();return true}}function import_stop(g,e,h){var f="";$("#im_nok_"+g).hide();$("#im_ok_"+g).hide();$("#im_msg_"+g).hide();$("#ul_process_"+g).hide();if(h!=""){$("#im_msg_"+g).html(h);$("#im_msg_"+g).show()}else{if(e){$("#im_ok_"+g).show()}else{$("#im_nok_"+g).show()}}$("#ul_form_"+g).html(f+"<label>"+mydbr_loc.MYDBR_IMPORT_FILE+' <input name="mydbrimport" type="file" size="30"><br></label><label><input type="submit" value="'+mydbr_loc.MYDBR_IMPORT_IMPORT+'"></label>');$("#ul_form_"+g).show();$.ajax({url:"lib/import_result.php",type:"get",data:{id:g},success:function(a){$("#im_"+g+" > .result").show().html(a);$("#im_"+g+" > .content").hide()}});return true}function set_scrollable_position(b){b.closest(".scrolling_area").scrollTop($("tr.scrollable_top",b).offset().top-$("tbody tr:first",b).offset().top)}$.tablesorter.addWidget({id:"saveSort",format:function(e){var d,f=$(e);if(f.hasClass("sort_rmbr")){if(e.config.debug){d=new Date()}if(f.hasClass("has_sort_rmbr")&&e.config.hasInitialized){$.ajax({url:"lib/sort_remember.php",type:"post",data:{table_id:f.attr("id"),report:getURLParameter("r"),sortlist:JSON.stringify(e.config.sortList)}})}else{f.addClass("has_sort_rmbr")}if(e.config.debug){$.tablesorter.benchmark("Applying saveSort widget",d)}}}});function showPopup(g,l,h){var j,k,i;if(l){hideCurrentPopup(l);l.cancelBubble=true;i=get_event_coord(l,-5,-5,true);j=l.target?l.target:l.srcElement;changeObjectVisibility(g,"block");k=$("#"+g).parentRelative();i.x-=k.left;i.y-=k.top;if(h){moveObject(g,i)}window.currentlyVisiblePopup=g;return true}else{return false}}function elementOrParentIsFixed(h){var e=$(h),f=e.add(e.parents()),g=false;f.each(function(){if($(this).css("position")==="fixed"){g=true;return false}});return g}function get_event_coord(j,f,i,g){var h=new Object();if(j.pageY&&!$.browser.msie){h.x=j.pageX+f;h.y=j.pageY+i;if(g&&elementOrParentIsFixed(j.currentTarget)){h.x-=document.body.scrollLeft;h.y-=document.body.scrollTop}}else{h.x=j.clientX+document.documentElement.scrollLeft+f;h.y=j.clientY+document.documentElement.scrollTop+i;if(g&&elementOrParentIsFixed(j.currentTarget)){h.x-=document.documentElement.scrollLeft;h.y-=document.documentElement.scrollTop}}return h}function hideCurrentPopup(k){var l,n,m,h,e,j;m=window.event||k;if(m.button==2){return}if(window.currentlyVisiblePopup){coord=get_event_coord(m,0,0,false);h=$("#"+window.currentlyVisiblePopup).width();e=$("#"+window.currentlyVisiblePopup).height();j=$("#"+window.currentlyVisiblePopup).offset();l=coord.x<j.left||(coord.x>(j.left+h));n=coord.y<j.top||(coord.y>(j.top+e));if((l)||(n)){changeObjectVisibility(window.currentlyVisiblePopup,"none");window.currentlyVisiblePopup=false}}}window.onload=initializeHacks;document.onclick=hideCurrentPopup;function initializeHacks(){if((navigator.appVersion.indexOf("MSIE 5")!=-1)&&(navigator.platform.indexOf("Mac")!=-1)&&getStyleObject("blankDiv")){window.onresize=explorerMacResizeFix}resizeBlankDiv();createFakeEventObj()}function createFakeEventObj(){if(!window.event){window.event=false}}function resizeBlankDiv(){if((navigator.appVersion.indexOf("MSIE 5")!=-1)&&(navigator.platform.indexOf("Mac")!=-1)&&getStyleObject("blankDiv")){getStyleObject("blankDiv").width=document.body.clientWidth-20;getStyleObject("blankDiv").height=document.body.clientHeight-20}}function explorerMacResizeFix(){location.reload(false)}function getStyleObject(b){if(document.getElementById&&document.getElementById(b)){return document.getElementById(b).style}else{if(document.all&&document.all(b)){return document.all(b).style}else{if(document.layers&&document.layers[b]){return document.layers[b]}else{return false}}}}function changeObjectVisibility(e,f){var d=getStyleObject(e);if(d){d.display=f;return true}else{return false}}function moveObject(i,k){var p,o=getStyleObject(i),j,l=get_x_size(),m,n;j=document.getElementById(i).offsetWidth-10;m=get_x_scroll();if((k.x+j)>l){n=l-j-10+m;k.x=(n<k.x)?n:k.x}if(o){o.left=k.x+"px";o.top=(k.y-5)+"px";p=$("#"+i).parentRelative();if((p.left!=0||p.top!=0)&&($("#"+i).offset().left+j>l)){to_left=$("#"+i).offset().left+j-l;k.x-=to_left+10+m;o.left=k.x+"px"}return true}else{return false}}function get_x_size(){var b=0;if(document.documentElement&&document.documentElement.clientWidth){b=document.documentElement.clientWidth}else{if(document.body&&document.body.clientWidth){b=document.body.clientWidth}else{if(window.innerWidth){b=window.innerWidth-18}}}return b}function get_x_scroll(){var b;if(window.pageXOffset){b=window.pageXOffset}else{if(window.event){b=document.documentElement.scrollLeft+document.body.scrollLeft}else{b=window.scrollX}}return b}function onMenu(d,c){c.style.cursor="pointer";document.getElementById(d).style.backgroundColor="#B0FE86"}function offMenu(b){document.getElementById(b).style.color="#000000";document.getElementById(b).style.backgroundColor="#FFFFFF"}(function(b){b.mydbr_pager=function(O,M){var E={},L=this,J,P=b(O),a=P.find(".pager_first_d"),y=P.find(".pager_prev_d"),D=P.find('input[name="page"]'),N=P.find(".max"),w=P.find(".pager_next"),z=P.find(".pager_last"),G=P.find('input[name="length"]'),x=P.find('input[name="start"]'),C=P.find('input[name="end"]'),K=function(){var k=P.closest("table"),c=parseInt(D.val(),10),f=parseInt(x.val(),10),i=parseInt(C.val(),10),g=parseInt(G.val(),10),d=((c-1)*g)+1,e=(c*g),j,h;h=k.find("TBODY").children().length-k.find(".last_row").length;f=isNaN(f)?0:f;i=isNaN(i)?0:i;if(e>h&&h>0){e=h}J=new Date().getTime();for(j=f;j<=i;j+=1){k.find("tbody tr").eq(j-1).hide()}for(j=d;j<=e;j+=1){k.find("tbody tr").eq(j-1).show()}b('.pager_row input[name="page"]',k).val(c);b('.pager_row input[name="start"]',k).val(d);b('.pager_row input[name="end"]',k).val(e);if(parseInt(D.val(),10)<parseInt(N.text(),10)){b(".pager_row .pager_next",k).removeClass("pager_next_d").removeAttr("disabled");b(".pager_row .pager_last",k).removeClass("pager_last_d").removeAttr("disabled")}else{b(".pager_row .pager_next",k).addClass("pager_next_d").attr("disabled","disabled");b(".pager_row .pager_last",k).addClass("pager_last_d").attr("disabled","disabled")}if(parseInt(D.val(),10)>1){b(".pager_row .pager_prev",k).removeClass("pager_prev_d").removeAttr("disabled");b(".pager_row .pager_first",k).removeClass("pager_first_d").removeAttr("disabled")}else{b(".pager_row .pager_prev",k).addClass("pager_prev_d").attr("disabled","disabled");b(".pager_row .pager_first",k).addClass("pager_first_d").attr("disabled","disabled")}},H=function(){D.val(1);K()},B=function(){D.val(parseInt(D.val(),10)-1);K()},A=function(){D.val(parseInt(D.val(),10)+1);K()},F=function(){D.val(parseInt(N.text(),10));K()},I=function(){var c=parseInt(D.val(),10);if(isNaN(c)||c<1){D.val(1)}else{if(c>parseInt(N.text(),10)){D.val(N.text())}}K()};L.settings={};L.init=function(){L.settings=b.extend({},E,M);var c=P.closest("table"),e=G.val(),d;D.val(1);d=c.find("TBODY").children().length-c.find(".last_row").length;N.text(d>0?Math.ceil(d/e):1);a.on("click",function(){H()});y.on("click",function(){B()});w.on("click",function(){A()});z.on("click",function(){F()});D.on("change",function(){I()});K()};L.init()};b.fn.mydbr_pager=function(a){return this.each(function(){if(undefined===b(this).data("mydbr_pager")){var d=new b.mydbr_pager(this,a);b(this).data("mydbr_pager",d)}})}}(jQuery));